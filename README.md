# Сервис обработки заказов

## Описание проекта
Демонстрационный сервис для обработки и хранения заказов с использованием Go, PostgreSQL и Apache Kafka.

## Требования
- Docker
- Docker Compose
- Git
## Функциональность
- Получение заказов через Apache Kafka
- Хранение данных в PostgreSQL
- Кэширование заказов в памяти сервиса
- HTTP-сервер для получения данных по ID заказа

## Предварительная настройка
1. Клонируйте репозиторий:
```bash
git clone https://github.com/kostenbl4/wb_task_L0.git
cd wb_task_L0
```

2. Убедитесь, что у вас установлены Docker и Docker Compose

## Запуск проекта
```bash
docker-compose up -d
```

### Первичное наполнение данными
В проекте есть скрипты в директории `/scripts` для генерации тестовых данных:
- `generate.go`: Генерация фейковых заказов
- `producer.go`: Продюсер для отправки данных в Kafka
- `main.go`: Заполнение Kafka тестовыми данными

Также в ней лежит сам исполняемый файл скрипта - `script`
Для запуска
```bash
/scripts/script
```
или
```bash
cd scripts
./script
```

## Структура проекта
- `cmd/`: Основной код приложения
- `internal/`: Внутренние пакеты (кэш, база данных, Kafka)
- `scripts/`: Утилиты для тестирования и генерации данных
- `Dockerfile`: Сборка Docker-образа
- `docker-compose.yml`: Конфигурация Docker Compose

## Технологический стек
- Язык: Go 1.23.4
- База данных: PostgreSQL
- Брокер сообщений: Apache Kafka
- Библиотеки:
  - Chi (роутинг)
  - Confluent Kafka Go (кафка)
  - GoFakeit (генерация тестовых данных)
  - Godotenv (работа с переменными окружения)
  - Goose (миграции базы данных)
  - Testify (юнит-тесты)


## Эндпоинты
- `GET /`: Страница с интерфейсом для получения данных  о заказе по ID
- `GET /orders/{id}`: Получение информации о заказе по ID в виде JSON
- `POST /orders/`: Создание заказа из JSON
- `DELETE /orders/{id}`: Удаление информации о заказе по ID
- `GET /health`: Проверка состояния сервера

## Автор
Kostenko Aleksandr